<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <title>Список замовлень</title>
    <style>
        .top-bar { display: flex; justify-content: space-between; align-items: center; }
        .container { max-width: 800px; margin: auto; }
    </style>
</head>
<body>
    <div class="container">
        <div class="top-bar">
            <h1>Список замовлень</h1>
            <div>
                <button onclick="logout()">Вийти</button>
            </div>
        </div>

        <div id="orders-container">Завантаження...</div>

        <a href="/index.html">Головна</a>
    </div>

    <script type="module">
        import { protectPage } from "../src/protect.js";
        import { logout } from "../src/auth.js";
        import { getOrders } from "../src/api.js";

        protectPage();
        window.logout = logout;

        const container = document.getElementById("orders-container");

        getOrders().then(orders => {
            container.innerHTML = "";
            if (orders.length === 0) {
                container.innerHTML = "<p>Немає замовлень</p>";
            } else {
                orders.forEach(order => {
                    const el = document.createElement("div");
                    el.style = "border: 1px solid #ccc; padding: 10px; margin-bottom: 10px;";
                    el.innerHTML = `
                        <p><strong>ID замовлення:</strong> ${order.id}</p>
                        <p><strong>Статус:</strong> ${order.status}</p>
                    `;
                    container.appendChild(el);
                });
            }
        });
    </script>
</body>
</html>
